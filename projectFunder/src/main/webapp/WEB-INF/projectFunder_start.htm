<html>
<head>
<title>ProjectFunder</title>

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

<body>
	<div id="wrapper">
		<div id="header">
		<h1> ProjectFunder Website </h1>
		</div>
		
		
		
		<div id="navigation"> 
			<a title="my_project" href="view_profile.htm"> Mein Profil </a>
		</div> <!-- navigation --> 
	   
		<div id="site">
		<p>
			Die Datenbank funder ist ${db2exists}
		</p>
		
		<h2>Offene Projekte</h2>
		<div id="content">
		<%
			
			String sql =  "projekt.titel, projekt.ersteller,"
						+ "projekt.finanzierungslimit"
						+ "from projekt";
			
		    try{
				//Connection con = DBUtil.getConnection();
				Connection con = DBUtil.getExternalConnection();
				PreparedStatement ps = con.preparedStatement();
				ResultSet rs = ps.executeQuery(sql);
			
				while (rs.next()) {
					String titel = rs.getString(1);
					String ersteller = rs.getString(2);
					String status = rs.getString(3);
					out.println("<a href =" + titel + ".htm>" 
								+ titel + "</a>");
				out.println("<br>");
				out.println("von:  " + ersteller +  "  <br>");
				out.println("Aktuell: " + status ); 
			 }//while
		   rs.close();
		   ps.close();
		   con.close();
		   } catch (SQLExeption e){ e.printStackTrace()
			 }catch (Exeption e) {};
				
		%>
		</div> <!-- content --> 
		
		<h2> Abgeschlossene Projekte</h2>
		
		<div id="content">
		
		<%
			String sql = "projekt.titel, projekt.ersteller," 
			+ "projekt.status, benutzer.beschreibung"
			+ "projekt.finanzierungslimit  from projekt";

			try{
			Connection con = DBUtil.getConnection();
			PreparedStatement ps = con.preparedStatement();
			ResultSet rs = ps.executeQuery(sql);	
			
			if( rs.getString(3).equals("geschlossen")) {
			  while (rs.next()) {
			    out.println(rs.getString(1) + "<br>");
				out.println("<a href = " +  
				rs.getString(4) + ".htm>" + Benutzerprofil + "</a>");
				out.println("Aktuell: " + rs.getdouble(5) ); 		
			  } //while
			}
			rs.close();
			ps.close();
			con.close();
		   } catch (SQLExeption e){ e.printStackTrace()
			 }catch (Exeption e) {};
		
		%>
		</div> <!-- navigation --> 
		
		<div id="foot"> 
			<a title="new_project" href="new_project.htm"> Projekt erstellen </a>
		</div> <!-- foot --> 
		
	   </div>  <!-- site -->  
	</div> <!-- wrapper--> 
</body>
</html>
